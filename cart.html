<!-- <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cart | Paryavaran</title>
<style>
body { font-family:'Segoe UI',sans-serif; background:#f4f9f4; padding:2rem;}
.cart-item { display:flex; align-items:center; gap:1rem; background:#fff; padding:1rem; border-radius:8px; margin-bottom:1rem; }
.cart-item img { width:80px; height:80px; object-fit:cover; border-radius:8px; }
.remove-btn, #place-order { padding:0.5rem 1rem; border:none; border-radius:6px; cursor:pointer; margin-left:auto; background:#e53935; color:#fff;}
.remove-btn:hover { background:#b71c1c;}
#place-order { background:#3b8a3e; margin-top:1rem;}
#place-order:hover { background:#1b5e20;}
</style>
</head>
<body>
<h2>üõí Your Cart</h2>
<div id="cart-items"></div>
<h3 id="cart-total"></h3>
<button onclick="window.location.href='index.html'">‚Üê Back to Shop</button>
<button id="place-order">Place Order</button>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const cartItems = document.getElementById('cart-items');
const cartTotal = document.getElementById('cart-total');

function renderCart(){
  cartItems.innerHTML = '';
  let total = 0;
  if(cart.length === 0){
    cartItems.innerHTML = '<p>Your cart is empty.</p>';
    cartTotal.textContent = '';
    return;
  }

  cart.forEach((item, index) => {
    total += item.price;
    const div = document.createElement('div');
    div.classList.add('cart-item');
    div.innerHTML = `
      <img src="${item.img}" alt="${item.name}">
      <div><strong>${item.name}</strong><br>‚Çπ${item.price}</div>
      <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
    `;
    cartItems.appendChild(div);
  });
  cartTotal.textContent = 'Total: ‚Çπ' + total;
}

function removeItem(index){
  if(confirm('Remove this item from your cart?')){
    cart.splice(index,1);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
  }
}

document.getElementById('place-order').addEventListener('click', () => {
  if(cart.length === 0){ 
    alert('Cart is empty!'); 
    return; 
  }

  // Save order in localStorage
  let orders = JSON.parse(localStorage.getItem('orders')) || [];
  orders.push({
    items: cart,
    payment: 'COD',
    total: cart.reduce((sum, i) => sum + i.price, 0),
    date: new Date().toLocaleString()
  });
  localStorage.setItem('orders', JSON.stringify(orders));

  // Clear cart
  cart = [];
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCart();

  // Show notification
  alert('‚úÖ Your order has been placed successfully!');

  // Redirect to success page
  window.location.href = 'order-success.html';
});

renderCart();
</script>

</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cart | Paryavaran</title>
<style>
body { font-family:'Segoe UI',sans-serif; background:#f4f9f4; padding:2rem;}
.cart-item { display:flex; align-items:center; gap:1rem; background:#fff; padding:1rem; border-radius:8px; margin-bottom:1rem; }
.cart-item img { width:80px; height:80px; object-fit:cover; border-radius:8px; }
.remove-btn, #place-order { padding:0.5rem 1rem; border:none; border-radius:6px; cursor:pointer; margin-left:auto; background:#e53935; color:#fff;}
.remove-btn:hover { background:#b71c1c;}
#place-order { background:#3b8a3e; margin-top:1rem;}
#place-order:hover { background:#1b5e20;}
button { margin-top:1rem; padding:0.5rem 1rem; border-radius:6px; border:none; cursor:pointer; }
</style>
</head>
<body>
<h2>üõí Your Cart</h2>
<div id="cart-items"></div>
<h3 id="cart-total"></h3>
<button onclick="window.location.href='index.html'">‚Üê Back to Shop</button>
<button id="place-order">Place Order</button>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const cartItems = document.getElementById('cart-items');
const cartTotal = document.getElementById('cart-total');

function renderCart(){
  cartItems.innerHTML = '';
  let total = 0;
  if(cart.length === 0){
    cartItems.innerHTML = '<p>Your cart is empty.</p>';
    cartTotal.textContent = '';
    return;
  }

  cart.forEach((item, index) => {
    total += item.price;
    const div = document.createElement('div');
    div.classList.add('cart-item');
    div.innerHTML = `
      <img src="${item.img}" alt="${item.name}">
      <div><strong>${item.name}</strong><br>‚Çπ${item.price}</div>
      <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
    `;
    cartItems.appendChild(div);
  });
  cartTotal.textContent = 'Total: ‚Çπ' + total;
}

function removeItem(index){
  if(confirm('Remove this item from your cart?')){
    cart.splice(index,1);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
  }
}

// Redirect to checkout page instead of placing order directly
document.getElementById('place-order').addEventListener('click', () => {
  if(cart.length === 0){ 
    alert('Cart is empty!'); 
    return; 
  }
  window.location.href = 'checkout.html';
});

renderCart();
</script>

</body>
</html>
